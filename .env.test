# ---------------------------------------------------------
# Flexile – Test Environment (.env.test)
# All values here are *ONLY* for running the test-suite.
# No real credentials should appear in this file.
# ---------------------------------------------------------

# ─────────────────────────────────────────────────────────
# Core Rails / DB / Redis settings
# ─────────────────────────────────────────────────────────
APP_DOMAIN=test.flexile.dev:3101
DOMAIN=test.flexile.dev

# Postgres test DB
DATABASE_URL="postgresql://username:password@127.0.0.1:5432/flexile_test"

# Redis (Sidekiq + cache)
REDIS_URL="redis://localhost:6389/2"
SIDEKIQ_REDIS_URL="redis://localhost:6389/3"

# Misc test tokens (dummy placeholders)
API_SECRET_TOKEN=dummy-api-token
DOCUSEAL_TOKEN=dummy
RESEND_API_KEY=dummy
NEXT_PUBLIC_EQUITY_EXERCISE_DOCUSEAL_ID=dummy
QUICKBOOKS_WEBHOOK_SECRET=dummy

# Authentication
ENABLE_DEFAULT_OTP=true
NEXTAUTH_SECRET=dummy-nextauth-secret
NEXTAUTH_URL=https://test.flexile.dev:3101

# ─────────────────────────────────────────────────────────
# Required Rails Configuration
# These variables must be present for Rails to boot,
# even in the test environment.
# ─────────────────────────────────────────────────────────

# Explicitly set Rails environment
RAILS_ENV=test

# Active Record encryption (dummy values – safe for tests)
ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY=dummy_primary_key_please_change
ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=dummy_deterministic_key_please_change
ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=dummy_key_derivation_salt

# Rails secret-key base (dummy)
SECRET_KEY_BASE=dummy_secret_key_base_for_tests

# ─────────────────────────────────────────────────────────
# Mock-Server Configuration
# These defaults make the test-suite run completely offline
# ─────────────────────────────────────────────────────────

# Enable Stripe & Wise mocks (set to "false" to hit real APIs)
USE_STRIPE_MOCK=true
USE_WISE_MOCK=true

# stripe-mock (local Go binary)
STRIPE_MOCK_HOST=localhost
STRIPE_MOCK_PORT=12111
STRIPE_MOCK_PROTOCOL=http

# Wise API (sandbox URL – safe even if hit accidentally)
WISE_API_BASE=https://api.sandbox.transferwise.tech

# ─────────────────────────────────────────────────────────
# Real API keys – *not* required when mocks are enabled.
# Uncomment & override locally only if you need real calls.
# STRIPE_SECRET_KEY=
# WISE_API_KEY=
# WISE_PROFILE_ID=
# ─────────────────────────────────────────────────────────
